soundcloud:
  client_id_env: SOUNDCLOUD_CLIENT_ID
  base_url: "https://api.soundcloud.com"
  user_agent: "soundgraph-relate/0.1 (community-tool)"
  reqs_per_minute: 50
  backoff:
    start_seconds: 2
    max_seconds: 60
store:
  raw_dir: "data/raw"
  staging_dir: "data/staging"
  logs_dir: "data/logs"
db:
  driver: "postgresql+psycopg2"
  host_env: "PGHOST"
  port_env: "PGPORT"
  user_env: "PGUSER"
  pwd_env: "PGPASSWORD"
  db_env: "PGDATABASE"
cache:
  default_path: "data/cache/tracks.db"
  max_age_hours: 24
  max_playlists_per_artist: 20
  max_tracks_per_playlist: 100
  min_playback_count: 1000
graph:
  default_depth: 1
  default_max_tracks: 500
  output_dir: "data/graphs"

# ============================================================
# DEEP HARVEST ENGINE CONFIGURATION
# ============================================================
# Philosophy: "Spill-First, Connect Later"
# Aggressive data collection to solve sparsity problem
# Prioritizes complete data lake before relationship building
# ============================================================

deep_harvest:
  # Global settings
  enabled: true
  request_delay: 0.3  # Seconds between API requests (slower but safer)
  
  # Phase 1: User Depth - Exhaustive user engagement crawl
  user_depth:
    enabled: true
    max_users_per_track: 500      # Collect up to 500 likers/reposters (10x increase)
    max_tracks_per_user: 500      # Fetch up to 500 liked tracks per user (5x increase)
    include_reposters: true       # Include users who reposted
    include_commenters: true      # Include users who commented (when available)
  
  # Phase 2: Playlist Depth - Complete playlist ecosystem
  playlist_depth:
    enabled: true
    max_playlists: 200            # Harvest up to 200 playlists (10x increase)
    max_tracks_per_playlist: 500  # No limit on playlist track count (5x increase)
    include_artist_playlists: true
    include_liker_playlists: true  # Check playlists from top likers
  
  # Phase 3: Artist Depth - Complete discography
  artist_depth:
    enabled: true
    max_artist_tracks: 1000       # Complete discography (no artificial limit)
    include_remixes: true         # Include remixes by artist
    include_features: true        # Include tracks where artist is featured
  
  # Phase 4: Semantic Depth - Fuzzy name matching
  semantic_depth:
    enabled: true
    fuzzy_search_limit: 100       # Max results per search term
    name_similarity_threshold: 0.6 # Minimum similarity score (0-1)
    max_key_terms: 3              # Extract top N key terms from title
    include_remix_variations: true
    include_cover_versions: true
  
  # Phase 5: Commentary Layer - High-engagement users
  commentary_layer:
    enabled: true  # Currently limited by API availability
    max_commenters: 100
    min_comment_length: 10        # Filter out short comments
    harvest_commenter_libraries: true
  
  # Phase 6: Label/Network Layer - Entire label catalogs
  label_layer:
    enabled: true
    max_labels_per_track: 3       # Process top 3 detected labels
    max_catalog_size: 200         # Max tracks to fetch per label
    detection_methods:
      - label_field               # Official label field
      - description_parsing       # Parse from description
      - publisher_metadata        # Publisher info
  
  # Phase 7: Contextual Entity Layer - Mentioned artists/collaborators
  contextual_layer:
    enabled: true
    max_entities: 10              # Process top 10 extracted entities
    max_tracks_per_entity: 50     # Max tracks per mentioned entity
    extraction_patterns:
      - mentions                  # @username patterns
      - featuring                 # "feat.", "ft.", "featuring"
      - remixes                   # "remix by", "remixed by"
      - production                # "prod. by", "produced by"

# ============================================================
# LEGACY MULTI-LAYER CONFIGURATION (Deprecated)
# ============================================================
# The original multi-layer system is now superseded by Deep Harvest
# This configuration is kept for backward compatibility only
# ============================================================

multi_layer:
  # Enable/disable specific relationship layers
  enabled_layers:
    layer1_playlist_cooccurrence: true   # Track-to-Track via playlist co-occurrence
    layer2_user_engagement: false        # DEPRECATED: Use deep_harvest.user_depth instead
    layer3_user_similarity: false        # DEPRECATED: Use deep_harvest instead
    layer4_artist_collaboration: false   # DEPRECATED: Use deep_harvest instead
  
  # Layer 1: Track co-occurrence (still used for lightweight mode)
  layer1:
    max_playlists_per_artist: 20
    max_tracks_per_playlist: 100
    min_playback_count: 1000
    depth: 1


